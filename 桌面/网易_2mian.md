# 1.IO复用

一个进程监视多个描述符，一旦某个描述符就绪（一般是读就绪或者写就绪），能够通知程序进行相应的读写操作。

一定要配合Nonblock IO进行使用：

- 非阻塞IO一般配合ET通知机制一起使用
- 因为多路复用是检查多个文件描述符, 若阻塞在一个文件描述符上, 从而阻止检查其他的文件描述符
- 即使写就绪, 如果写入大块数据还是会阻塞

# 2.阻塞在 callback 上，如何处理？

负载均衡 + bitmap

# 3.火焰图

```cpp
$ sudo perf record -F 99 -p 13204 -g -- sleep 30
```
上面的代码中，perf record表示记录，-F 99表示每秒99次，-p 13204是进程号，即对哪个进程进行分析，-g表示记录调用栈，sleep 30则是持续30秒。

perf record 
perf report 

y 轴表示调用栈，每一层都是一个函数。调用栈越深，火焰就越高，顶部就是正在执行的函数，下方都是它的父函数。

x 轴表示抽样数，如果一个函数在 x 轴占据的宽度越宽，就表示它被抽到的次数多，即执行的时间长 

火焰图就是看顶层的哪个函数占据的宽度最大。只要有"平顶"（plateaus），就表示该函数可能存在性能问题。

颜色没有特殊含义，因为火焰图表示的是 CPU 的繁忙程度，所以一般选择暖色调。

# 
# 
# 
# 
# 

# 
# 
# 
# 

# 
# 
# 
# 

# 
# 
# 
# 

# 
# 
# 
# 

